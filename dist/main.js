import initMenu from"./features/general/menu.js";import createInitialState from"./utils/createInitialState.js";import setupBarba from"./utils/setupBarba.js";initMenu();const barba=setupBarba();createInitialState();let currentAnimationModule=null;function cleanupCurrentModule(){currentAnimationModule&&currentAnimationModule.cleanup&&currentAnimationModule.cleanup()}function getBaseUrl(){const e=document.querySelector('script[src*="main.js"]'),t=e?.src||"";return t.substring(0,t.lastIndexOf("/")+1)}function loadPageModule(e){const t=getBaseUrl();import(`${t}pages/${e}.js`).then((n=>{currentAnimationModule=n.default||{},console.log(`${t}pages/${e}.js`),"function"==typeof currentAnimationModule.init?currentAnimationModule.init():console.warn(`Module for page ${e} does not have an init function.`)})).catch((t=>{console.error(`Failed to load module for page: ${e}`,t),currentAnimationModule={}}))}const initialPageName=document.querySelector('[data-barba="container"]').dataset.barbaNamespace;loadPageModule(initialPageName),barba.hooks.beforeEnter((({next:e})=>{cleanupCurrentModule()})),barba.hooks.afterLeave((({next:e})=>{loadPageModule(e.namespace)}));